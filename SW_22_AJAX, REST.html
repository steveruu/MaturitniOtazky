<!DOCTYPE html>                            <html>                                <head>                                    <meta charset="UTF-8">                                    <title>SW_22_AJAX, REST</title>                                    <link rel="stylesheet" href="./style/style.css">                                    <link rel="stylesheet" href="./style/kimbie.dark.css">                                    <meta name="viewport" content="width=device-width, initial-scale=1.0">                                    (27,31,35,.05);border-radius:3px;font-size:1rem}.markdown-content ul li pre,.manual ul li pre,pre{margin:0;direction:ltr!important}.markdown-content ul li pre code,.manual ul li pre code,pre code{direction:ltr!important;line-height:1.45;padding:1em 0 .5em 3em;position:relative;display:block;overflow-x:auto;overflow-y:auto}a{text-decoration:none}.title{float:left;color:#ccc}.markdown-container{padding-top:60px}.elements{padding:12px;position:fixed;top:0;right:0;left:0;background-color:#444;height:50px;z-index:1}.input{color:#fff}#savebutton,input{font-size:15px}#savebutton{padding:0 7px!important}#rtl-checkbox-container{margin:3px 15px!important;color:#fff}.button{background-color:#fff;color:#444;font-size:1.6rem;display:inline-block;text-align:center;line-height:2.1rem;border-radius:2px}.button:hover{cursor:pointer;background-color:#eee}#refresh-button{width:2.2rem;vertical-align:middle}@media print{.no-print,.no-print *{display:none!important}}.hljs-comment,.hljs-quote{color:#99ac5b}.hljs-meta,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#dc3958}.hljs-built_in,.hljs-builtin-name,.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-params,.hljs-type{color:#f79a32}.hljs-attribute,.hljs-section,.hljs-title{color:#f06431}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#9c9}.hljs-function,.hljs-keyword,.hljs-selector-tag{color:#98676a}.hljs{display:block;overflow-x:auto;background:#221a0f;color:#d3af86}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}                                </head>                                <body><div class="markdown-container ltr"><div class="markdown-content"><h1 id="sw-22-ajax-rest">SW 22 – AJAX, REST</h1>
<h2 id="ajax">AJAX</h2>
<ul>
<li>Asynchronous JavaScript and XML<ul>
<li>Dnes se spíše používá JSON místo XML</li>
</ul>
</li>
<li>Technologie pro tvorbu interaktivních aplikací nejen v prostředí webu</li>
<li>Základní myšlenka – Změna části stránky, aniž by se celá musela znovu načíst</li>
<li>Vizuálně hezčí, šetří se data</li>
<li>Využití např.:<ul>
<li>React axios</li>
<li>Komplexní webové aplikace od (Office, Gmail)</li>
<li>Našeptávače, interaktivní formuláře, validace dat na straně klienta</li>
<li>Chat</li>
</ul>
</li>
</ul>
<h3 id="pou-it-technologie">Použité technologie</h3>
<ol>
<li>HTML a CSS – vzhled a struktura stránky</li>
<li>DOM a JavaScript – modifikování obsahu na straně klienta<ul>
<li>DOM – Document Object Model – jazykově nezávislé rohraní umožňující přístup a aktualizaci prvků v dokumentu</li>
</ul>
</li>
<li>XMLHttpRequest (XHR) Object<ul>
<li>Zajišťuje komunikaci mezi serverem a klientem, (nejen) protokol HTTP</li>
<li>Stěžejní prvek AJAXu</li>
<li>Vytváření dotazů na dodatečná data</li>
</ul>
</li>
<li>XML, JSON, HTML, prostý text – formát dat pro výměnu informací<ul>
<li>XML – "Abstraktní HTML", dnes nahrazeno JSONem (úspora místa)</li>
</ul>
</li>
</ol>
<h3 id="komunikace">Komunikace</h3>
<p><strong>Pomocí AJAXu</strong> (asynchronní komunikace):</p>
<ul>
<li>Uživatel chce vidět podrobnosti o nějaké věci na stránce, rozklikne ji v prohlížeči</li>
<li>Klient (prohlížeč) žádá server o konkrétní data</li>
<li>Server zpracuje požadavek, vrací pouze požadovaná formátovaná data</li>
<li>Klient obdrží data a aktualizuje jen nutné části stránky</li>
</ul>
<p>Výhoda:</p>
<ul>
<li>Přenos méně dat (ovšem tendence k častějšímu přenosu)</li>
<li>Není potřeba sestavovat HTML stránku na straně serveru</li>
</ul>
<p>Nevýhoda:</p>
<ul>
<li>Nutná podpora v prohlížečích</li>
<li>Čtečky webových stránek mají s aktualizovaným obsahem problém</li>
<li>Některé web crawlery nemusí spouštět JS – neindexuje se AJAX obsah (Google crawler JS podporuje)</li>
</ul>
<p><strong>Bez AJAXu</strong> (klasická komunikace):</p>
<ul>
<li>Uživatel chce vidět podrobnosti o nějaké věci na stránce, rozklikne ji v prohlížeči</li>
<li>Klient (prohlížeč) žádá server o celou stránku</li>
<li>Server zpracuje požadavek, vrací celou novou stránku</li>
</ul>
<p>Výhoda:</p>
<ul>
<li>Jednoduchá implementace</li>
</ul>
<p>Nevýhoda:</p>
<ul>
<li>Náročné na data<ul>
<li>Pokaždé se zpracovává a přenáší kompletní webová stránka</li>
<li>Přenos veškerých dat (i těch nezměněných) – HTML, CSS, JS, grafika, ...</li>
</ul>
</li>
<li>Náročné na výkon<ul>
<li>Pokaždé je nutno stránku sestavit (server) a vyrenderovat (klient)</li>
</ul>
</li>
</ul>
<h2 id="json-a-xml">JSON a XML</h2>
<ul>
<li>Formáty pro výměnu dat</li>
</ul>
<p><strong>XML</strong> – Extensible Markup Language:</p>
<ul>
<li>Myšlenka – Čitelný strojem i člověkem</li>
<li>Aplikace – SVG, Česká státní správa</li>
</ul>
<pre><code class="lang-xml hljs "><span class="hljs-tag">&lt;<span class="hljs-name">person</span> <span class="hljs-attr">gender</span>=<span class="hljs-string">"male"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">firstname</span>&gt;</span>John<span class="hljs-tag">&lt;/<span class="hljs-name">firstname</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">lastname</span>&gt;</span>Doe<span class="hljs-tag">&lt;/<span class="hljs-name">lastname</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">person</span>&gt;</span>
</code></pre>
<p><strong>JSON</strong> – JavaScript Object Notation:</p>
<ul>
<li>Zápis objektů v JS</li>
<li>Název proměnné (klíče) ale musí být v uvozovkách</li>
<li>Při serializaci složitějších dat může nastat problém</li>
</ul>
<pre><code class="lang-json hljs ">{
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"John Doe"</span>,
    <span class="hljs-attr">"phoneNumbers"</span>: [
        {
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"home"</span>,
            <span class="hljs-attr">"number"</span>: <span class="hljs-string">"777777777"</span>
        },
        {
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"office"</span>,
            <span class="hljs-attr">"number"</span>: <span class="hljs-string">"666666666"</span>
        }
    ]
}
</code></pre>
<h2 id="odesl-n-a-zpracov-n-po-adavku">Odeslání a zpracování požadavku</h2>
<pre><code class="lang-javascript hljs ">fetch(<span class="hljs-string">"example.com/profile"</span>, {
    method: <span class="hljs-string">"POST"</span>
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(response)</span> </span>{
    <span class="hljs-keyword">return</span> response.json();
})
.<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(error)</span> </span>{
    console.log(error);
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span> </span>{
    <span class="hljs-comment">// Nastane v obou případech</span>
    <span class="hljs-comment">// Uklizení dat</span>
});
</code></pre>
<ul>
<li>XMLHttpRequest dnes používán prostřednictvím axios nebo Fetch API</li>
</ul>
<h3 id="fetch-api">Fetch API</h3>
<ul>
<li>Nahrazuje XMLHttpRequest globálně přístupnou metodou <code>fetch</code></li>
<li>Vyžádání dat, asynchronní request</li>
<li>Nefunkční v Internet Exploreru</li>
<li>Vrací objekt <code>Promise</code></li>
</ul>
<h3 id="promise">Promise</h3>
<ul>
<li>Dva možné stavy – data přišla <code>successCallback</code> / data nepřišla, chyba <code>failureCallback</code></li>
</ul>
<h2 id="api">API</h2>
<ul>
<li>Application Programming Interface</li>
<li>Rozhraní pro programování aplikací</li>
<li>Sbírka funkcí/tříd/protokolů/... nějaké knihovny/programu/kernelu/...</li>
<li>Na serveru se používá webové API s endpointy</li>
</ul>
<h2 id="dotazovac-metody-http">Dotazovací Metody HTTP</h2>
<p><strong>Representational State Transfer (REST)</strong>:</p>
<ul>
<li>URL (Uniform Resource Locator) reprezentuje přímý přístup k datům</li>
<li><code>http://www.server.cz/knihy</code> vrací seznam knih</li>
<li><code>http://www.server.cz/knihy/4</code> vrací knihu s ID == 4</li>
<li>REST metody:<ul>
<li><code>GET</code> – získat</li>
<li><code>POST</code> – vytvořit</li>
<li><code>DELETE</code> – smazat</li>
<li><code>PUT</code> – klient zasílá data, která aktualizují celou entitu</li>
<li><code>PATCH</code> – aktualizuje pouze část entity</li>
<li><code>OPTIONS</code> – dotaz na server, jaké podporuje metody</li>
</ul>
</li>
</ul>
</div></div></body>                            </html>